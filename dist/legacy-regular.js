(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o=function(){return t=function t(e,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.token=e,this.amount=n,this.pairing=r,this.isExpress=o},(e=[{key:"render",value:function(){this.renderAmount(),this.renderToken(),this.renderQr(),this.adjustGuides()}},{key:"renderAmount",value:function(){var t=document.getElementById("twint-amount");t&&(t.innerHTML=this.amount)}},{key:"renderToken",value:function(){var t=document.getElementById("qr-token");t&&(t.value=this.token)}},{key:"renderQr",value:function(){var t=document.getElementById("qrcode");t.innerHTML="",new QRCode(t,{text:this.token,width:300,height:300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},{key:"adjustGuides",value:function(){var t=document.getElementById("twint-guide-contact"),e=t.parentElement;this.isExpress?(t.classList.remove("hidden"),e.classList.add("md:grid-cols-2")):(t.classList.add("hidden"),e.classList.remove("md:grid-cols-2"))}}])&&n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const i=o,c=window.wp.apiFetch;var a=t.n(c);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,c,a=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}var p=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stages=e,this.start=null},(e=[{key:"begin",value:function(){this.start=new Date}},{key:"interval",value:function(){for(var t=new Date,e=Math.floor((t-this.start)/1e3),n=1e3,r=0,o=Object.entries(this.stages);r<o.length;r++){var i=s(o[r],2),c=i[0],a=i[1];if(!(e>=parseInt(c)))break;n=a}return n}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const b=p;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function v(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.intervalHanlder=new b({0:5e3,5:2e3,600:1e4,3600:0}),this.processing=!1,this.pairing=null,this.callbacks={}}return e=t,(n=[{key:"setPairing",value:function(t){this.pairing=t}},{key:"addCallBack",value:function(t,e){this.callbacks[t]=e}},{key:"start",value:function(){this.stopped=!1,this.intervalHanlder.begin(),this.onProcessing()}},{key:"stop",value:function(){this.stopped=!0}},{key:"onProcessing",value:function(){if(!this.processing&&!this.stopped){var t=this.intervalHanlder.interval();t>0&&setTimeout(this.check.bind(this),t)}}},{key:"onPaid",value:function(e){var n=this.callbacks[t.EVENT_PAID];n&&n(e)}},{key:"onCancelled",value:function(){var e=this.callbacks[t.EVENT_CANCELLED];e&&"function"==typeof e&&e()}},{key:"onFinish",value:function(t){return t.finish&&"PAID"===t.status?this.onPaid(t):t.finish&&"FAILED"===t.status?this.onCancelled():void 0}},{key:"check",value:function(){if(!this.stopped&&!this.processing){var t=this;this.processing=!0,a()({path:"/twint/v1/payment/status",method:"POST",data:{pairingId:this.pairing},cache:"no-store",parse:!1}).then((function(e){if(t.processing=!1,!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){if(!0===e.finish)return t.onFinish(e);t.onProcessing()})).catch((function(e){t.processing=!1,console.error("Error:",e)}))}}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();v(g,"EVENT_CANCELLED","cancelled"),v(g,"EVENT_PAID","paid");const w=g;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var j=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e="twint-copy-btn";this.input=document.getElementById("qr-token"),this.button=document.getElementById(e),this.button.addEventListener("click",this.onClick.bind(this)),this.clipboard=new Clipboard("#"+e),this.clipboard.on("success",this.onCopied.bind(this)),this.clipboard.on("error",this.onError.bind(this))},e=[{key:"onClick",value:function(t){t.preventDefault(),this.input.disabled=!1}},{key:"onCopied",value:function(t){t.clearSelection(),this.button.innerHTML=this.button.getAttribute("data-copied"),this.button.classList.add("copied"),this.button.classList.add("border-green-500"),this.button.classList.add("text-green-500"),this.input.disabled=!0,setTimeout(this.reset.bind(this),1e4)}},{key:"onError",value:function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)}},{key:"reset",value:function(){this.button.innerHTML=this.button.getAttribute("data-default"),this.button.classList.remove("copied"),this.button.classList.remove("border-green-500"),this.button.classList.remove("text-green-500")}}],e&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const P=j;function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}var L=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"init",value:function(){}},{key:"setToken",value:function(t){this.token=t}}])&&T(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const _=L;function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}function D(t,e,n){return e=R(e),function(t,e){if(e&&("object"==A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,N()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}function N(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(N=function(){return!!t})()}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}var H=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=D(this,e)).button=document.getElementById("twint-addroid-button"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){this.button&&(this.button.href=this.button.getAttribute("data-href").replace("--TOKEN--",this.token),this.button.click())}}])&&B(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(_);const x=H;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t,e){if("object"!=Q(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q(e)?e:e+""}function F(t,e,n){return e=K(e),function(t,e){if(e&&("object"==Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,G()?Reflect.construct(e,n||[],K(t).constructor):e.apply(t,n))}function G(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(G=function(){return!!t})()}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}var $=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=F(this,e)).container=document.getElementById("twint-ios-container"),t.registeredEvents=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(e,t),n=e,(r=[{key:"init",value:function(){var t=this;this.container&&!this.registeredEvents&&(this.banks=this.container.querySelectorAll("img"),this.banks&&this.banks.forEach((function(e){e.addEventListener("touchend",(function(n){t.onClickedBank(n,e)}))})),this.appLinksElements=this.container.querySelector("select"),this.appLinksElements&&this.appLinksElements.addEventListener("change",this.onChangeAppList.bind(this)),this.registeredEvents=!0)}},{key:"onChangeAppList",value:function(t){var e=t.target,n=e.options[e.selectedIndex].value;this.openAppBank(n)}},{key:"onClickedBank",value:function(t,e){var n=e.getAttribute("data-link");this.openAppBank(n)}},{key:"openAppBank",value:function(t){if(t){t=t.replace("--TOKEN--",this.token);try{window.location.replace(t);var e=setInterval((function(){clearInterval(e)}),2e3)}catch(t){}}}}])&&V(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(_);const z=$;function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X(r.key),r)}}function X(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}var Y,Z,tt,et=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=document.getElementById("twint-modal"),this.closeBtn=this.element.querySelector("#twint-close"),this.statusRefresher=new w,this.tokenCopier=new P,this.connectors=[],this.connectors.push(new x),this.connectors.push(new z),this.registerEvents(),this.callbacks={}}return e=t,n=[{key:"setContent",value:function(t){this.content=t}},{key:"addCallback",value:function(t,e){"function"==typeof e&&(this.callbacks[t]=e)}},{key:"show",value:function(){var t=this;this.closeBtn.querySelector("span").innerHTML=this.closeBtn.getAttribute("data-default"),this.tokenCopier.reset(),this.content.render(),this.element.classList.remove("!hidden"),this.connectors.forEach((function(e){e.setToken(t.content.token),e.init()})),this.statusRefresher.setPairing(this.content.pairing),this.statusRefresher.addCallBack(w.EVENT_CANCELLED,this.close.bind(this)),this.statusRefresher.addCallBack(w.EVENT_PAID,this.onPaid.bind(this)),this.statusRefresher.start()}},{key:"close",value:function(){this.element.classList.add("!hidden"),this.statusRefresher.stop();var e=this.callbacks[t.EVENT_CLOSED];e&&e()}},{key:"registerEvents",value:function(){this.closeBtn.addEventListener("click",this.close.bind(this))}},{key:"refreshMiniCart",value:function(){document.body.classList.contains("woocommerce-cart")||(jQuery(document.body).trigger("added_to_cart"),jQuery(document.body).trigger("removed_from_cart"),jQuery(document.body).trigger("wc-blocks_removed_from_cart"),jQuery(document.body).trigger("wc-blocks_added_to_cart"))}},{key:"onPaid",value:function(t){this.refreshMiniCart(),this.closeBtn.querySelector("span").innerHTML=this.closeBtn.getAttribute("data-success"),location.href=t.extra.redirect}},{key:"continue",value:function(){this.closeBtn.innerHTML=this.closeBtn.getAttribute("data-success")}}],n&&W(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();Y=et,tt="CLOSED",(Z=X(Z="EVENT_CLOSED"))in Y?Object.defineProperty(Y,Z,{value:tt,enumerable:!0,configurable:!0,writable:!0}):Y[Z]=tt;const nt=et;document.addEventListener("DOMContentLoaded",(function(){jQuery("form.checkout").on("checkout_place_order_success",(function(t,e){if(console.log(t,e),"success"===e.result){var n=new nt;n.addCallback(nt.EVENT_CLOSED,(function(){location.reload()}));var r=e.pairingToken,o=e.amount,c=e.pairingId,a=e.currency;n.setContent(new i(r,o+a,c,!1)),n.show()}}))}))})();