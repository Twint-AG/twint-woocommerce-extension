(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function n(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,"string");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}document.addEventListener("DOMContentLoaded",(function(t){var n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={pageSelector:"#qr-modal-content",appSelector:"#logo-container",qrCodeSelector:".qr-code",appLinkSelector:"#app-chooser",appCountDownInterval:2}},n=[{key:"init",value:function(){var t,e,n;this.$container=document.querySelector(this.options.pageSelector),this.$container&&(this.isMobile=null!==(t=this.$container.getAttribute("data-mobile"))&&void 0!==t&&t,this.isAndroid=null!==(e=this.$container.getAttribute("data-is-android-device"))&&void 0!==e&&e,this.isIos=null!==(n=this.$container.getAttribute("data-is-ios-device"))&&void 0!==n&&n,this.isIos&&this.handleIos(),this.isAndroid&&this.handleAndroid())}},{key:"handleIos",value:function(){var t=this;console.log("handling IOS device..."),this.$_apps=document.querySelector(this.options.appSelector),this.$qrCode=document.querySelectorAll(this.options.qrCodeSelector),this.$appLinks=document.querySelector(this.options.appLinkSelector),this.$banks=document.querySelectorAll(".bank-logo"),this.$banks&&this.$banks.forEach((function(e){e.addEventListener("touchend",(function(n){t.onClickBank(n,e)}))})),this.$appLinks&&this.$appLinks.addEventListener("change",this.onChangeAppList.bind(this))}},{key:"handleAndroid",value:function(){var t=this;console.log("handling android device..."),this.$qrCode=document.querySelectorAll(this.options.qrCodeSelector);var e=this.$container.getAttribute("data-android-link");window.location.replace(e);var n=setInterval((function(){t.showMobileQrCode(),clearInterval(n)}),1e3*this.options.appCountDownInterval)}},{key:"onClickBank",value:function(t,e){var n=e.getAttribute("data-link");this.openAppBank(n)}},{key:"onChangeAppList",value:function(t){var e=t.target,n=e.options[e.selectedIndex].value;this.openAppBank(n)}},{key:"openAppBank",value:function(t){var e=this;if(t)try{window.location.replace(t);var n=setInterval((function(){window.location.href!==t&&e.showMobileQrCode(),clearInterval(n)}),1e3*this.options.appCountDownInterval)}catch(t){this.showMobileQrCode()}}},{key:"showMobileQrCode",value:function(){this.$qrCode.forEach((function(t){var e;null==t||null===(e=t.classList)||void 0===e||e.remove("hidden")}))}}],n&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();(new n).init()}))})();