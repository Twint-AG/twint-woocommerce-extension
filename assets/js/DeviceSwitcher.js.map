{"version":3,"file":"DeviceSwitcher.js","mappings":"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","sources":["webpack://woocommerce-gateway-twint/./resources/js/frontstore/DeviceSwitcher.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function (event) {\n    class DeviceSwitcher {\n        constructor() {\n            this.options = {\n                // pageSelector: '.twint-qr-container',\n                pageSelector: '#qr-modal-content',\n                appSelector: '#logo-container',\n                qrCodeSelector: \".qr-code\",\n                appLinkSelector: \"#app-chooser\",\n                appCountDownInterval: 2, //second\n            };\n        }\n\n        init() {\n            this.$container = document.querySelector(this.options.pageSelector);\n\n            if (!this.$container) {\n                return;\n            }\n\n            this.isMobile = this.$container.getAttribute('data-mobile') ?? false;\n            this.isAndroid = this.$container.getAttribute('data-is-android-device') ?? false;\n            this.isIos = this.$container.getAttribute('data-is-ios-device') ?? false;\n\n            if (this.isIos) {\n                this.handleIos();\n            }\n\n            if (this.isAndroid) {\n                this.handleAndroid();\n            }\n        }\n\n        handleIos() {\n            console.log('handling IOS device...');\n            this.$_apps = document.querySelector(this.options.appSelector);\n            this.$qrCode = document.querySelectorAll(this.options.qrCodeSelector);\n            this.$appLinks = document.querySelector(this.options.appLinkSelector);\n            this.$banks = document.querySelectorAll('.bank-logo');\n\n\n            if (this.$banks) {\n                this.$banks.forEach((object) => {\n                    object.addEventListener('touchend', (event) => {\n                        this.onClickBank(event, object);\n                    });\n                });\n            }\n\n            if (this.$appLinks) {\n                this.$appLinks.addEventListener('change', this.onChangeAppList.bind(this))\n            }\n        }\n\n        handleAndroid() {\n            console.log('handling android device...');\n            this.$qrCode = document.querySelectorAll(this.options.qrCodeSelector);\n\n            let link = this.$container.getAttribute('data-android-link');\n            window.location.replace(link);\n            const checkLocation = setInterval(() => {\n                this.showMobileQrCode();\n                clearInterval(checkLocation);\n            }, this.options.appCountDownInterval * 1000);\n        }\n\n        onClickBank(event, object) {\n            let link = object.getAttribute('data-link');\n            this.openAppBank(link);\n        }\n\n        onChangeAppList(event) {\n            const select = event.target;\n            let link = select.options[select.selectedIndex].value;\n            this.openAppBank(link);\n        }\n\n        openAppBank(link) {\n            if (link) {\n                try {\n                    window.location.replace(link);\n\n                    const checkLocation = setInterval(() => {\n                        if (window.location.href !== link) {\n                            this.showMobileQrCode();\n                        }\n                        clearInterval(checkLocation);\n                    }, this.options.appCountDownInterval * 1000);\n                } catch (e) {\n                    this.showMobileQrCode();\n                }\n            }\n        }\n\n        showMobileQrCode() {\n            this.$qrCode.forEach((object) => {\n                object?.classList?.remove('d-none');\n            });\n        }\n    }\n\n    new DeviceSwitcher().init();\n});"],"names":["document","addEventListener","event","DeviceSwitcher","constructor","options","pageSelector","appSelector","qrCodeSelector","appLinkSelector","appCountDownInterval","init","_this$$container$getA","_this$$container$getA2","_this$$container$getA3","$container","querySelector","isMobile","getAttribute","isAndroid","isIos","handleIos","handleAndroid","console","log","$_apps","$qrCode","querySelectorAll","$appLinks","$banks","forEach","object","onClickBank","onChangeAppList","bind","link","window","location","replace","checkLocation","setInterval","showMobileQrCode","clearInterval","openAppBank","select","target","selectedIndex","value","href","e","classList","remove"],"sourceRoot":""}