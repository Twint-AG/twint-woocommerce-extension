document.addEventListener("DOMContentLoaded",(function(t){(new class{count=0;constructor(){this.options={adminUrl:woocommerce_params.ajax_url,urlParams:new URLSearchParams(window.location.search),nonceValue:null,containerSelector:"#twint-qr-container",pairingHash:null,interval:5,expressCheckout:!1,orderId:-1}}init(){this.checking=!1,this.$container=document.querySelector(this.options.containerSelector),this.$container&&(this.options.nonceValue=document.querySelector("input#twint_wp_nonce").value,this.options.orderId=this.$container.getAttribute("data-order-id"),this.options.expressCheckout||this.checkOrderRegularStatus())}reachLimit(){return!!(this.checking||this.count>10)||(this.count++,this.checking=!0,!1)}checkOrderRegularStatus(){let t=this.options.adminUrl;const e=this.options.nonceValue;if(""===e||void 0===e)return;const n=this;-1!==this.options.orderId&&jQuery.ajax({url:t,data:{action:"twint_check_order_status",orderId:parseInt(this.options.orderId),nonce:this.options.nonceValue},success:function(t){if(t=JSON.parse(t),console.log(t),!0===t.success&&!0===t.isOrderPaid){let t=window.location.href;window.location.href=`${t}&twint_order_paid=true`}else if("cancelled"===t.status){let t=window.location.href;window.location.href=`${t}&twint_order_cancelled=true`}else!1===t.isOrderPaid&&setInterval(n.checkOrderRegularStatus.bind(n),1e3*n.options.interval)}})}}).init()}));